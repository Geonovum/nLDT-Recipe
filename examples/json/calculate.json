{
  "type": "recipe",
  "conformsTo": [
    "http://www.opengis.net/spec/recipe/0.3/conf/core",
    "http://www.opengis.net/spec/recipe/0.3/conf/profiles",
    "http://www.opengis.net/spec/recipe/0.3/conf/types-schemas"
  ],
  "id": "dt-rain-traffic",
  "title": "Simuleer effect regen op verkeer",
  "description": "Deze recipe brengt neerslag, riolering, wegennet en mobiliteitsmodellen bij elkaar om te simuleren welke impact een zware bui heeft op verkeer. Het resultaat kan gebruikt worden om knelpunten te identificeren, maatregelen te testen en scenarioâ€™s door te rekenen in de digital twin.",
  "attribution": [
    "Geonovum",
    "Purple Polar Bear",
    "Triply",
    "Future Insight",
    "Esri",
    "Clappform",
    "Nelen & Schuurmans",
    "Goudappel",
    "ilabs",
    "Tygron",
    "Imagem",
    "Avineon Tensing",
    "Synexis"
  ],
  "version": "1.0.0",
  "tags": ["rain", "traffic", "climate"],
  "license": "CC-BY-4.0",
  "links": [
    {
      "rel": "self",
      "type": "application/json",
      "title": "This document",
      "href": "https://appstore.dt/?f=html"
    },
    {
      "rel": "alternate",
      "type": "text/html",
      "title": "This document as HTML",
      "href": "https://appstore.dt/daraa?f=html"
    },
    {
      "rel": "codelists",
      "title": "Codelists used in the data",
      "href": "https://appstore.dt/codelists"
    },
    {
      "rel": "conformance",
      "title": "Recipe conformance classes implemented by this server",
      "href": "https://appstore.dt/conformance"
    }
  ],
  "ingredienten": {
    "title": "Backdrop op OUP",
    "description": "Brondata op OUP voor de Digital Twin Rotterdam",
    "layers": [
      {
        "rel": "items",
        "title": "Aerial imagery als COG",
        "type": "image/tiff; application=geotiff; profile=cloud-optimized",
        "href": "https://rotterdam.nl/v1/collections/imagery/items?f=html&bbox=36.3952%2C32.6922%2C36.4308%2C32.7162&datetime=2011-03-16T14%3A51%3A12Z%2F2015-09-11T19%3A15%3A35Z"
      },
      {
        "rel": "items",
        "title": "3D city model als 3DTiles",
        "type": "model/gltf+json; profile=3dtiles",
        "href": "https://rotterdam.nl/v1/collections/3d-city-model/items?f=html&bbox=36.3952%2C32.6922%2C36.4308%2C32.7162&datetime=2011-03-16T14%3A51%3A12Z%2F2015-09-11T19%3A15%3A35Z"
      },
      {
        "rel": "items",
        "title": "DTM / maaiveldhoogte",
        "type": "application/geo+json",
        "href": "https://rotterdam.nl/v1/collections/DTM/items?f=html&bbox=36.3952%2C32.6922%2C36.4308%2C32.7162&datetime=2011-03-16T14%3A51%3A12Z%2F2015-09-11T19%3A15%3A35Z"
      },
      {
        "rel": "items",
        "title": "Wegennet (incl. snelwegen en hoofdroutes)",
        "type": "application/geo+json",
        "href": "https://rotterdam.nl/v1/collections/wegennet/items?f=html&bbox=36.3952%2C32.6922%2C36.4308%2C32.7162&datetime=2011-03-16T14%3A51%3A12Z%2F2015-09-11T19%3A15%3A35Z"
      },
      {
        "rel": "items",
        "title": "Sewer network / rioolstelsel",
        "type": "application/geo+json",
        "href": "https://rotterdam.nl/v1/collections/rioolstelsel/items?f=html&bbox=36.3952%2C32.6922%2C36.4308%2C32.7162&datetime=2011-03-16T14%3A51%3A12Z%2F2015-09-11T19%3A15%3A35Z"
      },
      {
        "rel": "items",
        "title": "KNMI weather forecast / neerslagveld",
        "type": "application/x-hdf5",
        "href": "https://knmi.nl/v1/collections/forecast/items?f=html&bbox=36.3952%2C32.6922%2C36.4308%2C32.7162&datetime=2011-03-16T14%3A51%3A12Z%2F2015-09-11T19%3A15%3A35Z"
      }
    ],
    "extent": {
      "spatial": {
        "bbox": [[36.395158, 32.693301, 36.430814, 32.717333]],
        "crs": "http://www.opengis.net/def/crs/OGC/1.3/CRS84",
        "camera": "camera 1"
      },
      "temporal": {
        "interval": [["2011-03-16T14:51:12Z", "2015-09-11T19:15:35Z"]],
        "trs": "http://www.opengis.net/def/uom/ISO-8601/0/Gregorian"
      }
    },
    "crs": [
      "http://www.opengis.net/def/crs/OGC/1.3/CRS84",
      "http://www.opengis.net/def/crs/OGC/0/CRS84",
      "http://www.opengis.net/def/crs/EPSG/0/3395",
      "http://www.opengis.net/def/crs/EPSG/0/3857",
      "http://www.opengis.net/def/crs/EPSG/0/4326"
    ],
    "viewpoints": {
      "cameras": [
        {
          "id": "camera1",
          "title": "Zicht op Meent",
          "description": "Perspective camera gericht op de Meent in Rotterdam",
          "type": "application/geopose+json",
          "GeoPose": {
            "frame_spec": {
              "model": "WGS-84",
              "frame": "Y-Up-ENU"
            },
            "pose": {
              "position": {
                "lat": 51.4,
                "lon": 5.02,
                "h": 150.923
              },
              "quaternion": {
                "x": 0.0104,
                "y": -0.9851,
                "z": -0.0026,
                "w": 0.1715
              }
            }
          }
        },
        {
          "id": "camera2",
          "title": "Zicht op Meent",
          "description": "Perspective camera gericht op de Meent in Rotterdam",
          "type": "application/geopose+json",
          "position": {
            "x": 51.5,
            "y": 5,
            "z": 300
          },
          "rotation": {
            "x": 0.0054,
            "y": -0.5753,
            "z": -0.0092,
            "w": 0.8178
          },
          "crs": "http://www.opengis.net/def/crs/OGC/1.3/CRS84"
        }
      ]
    }
  },
  "processing": [
    {
      "id": "processing1",
      "title": "blabla",
      "description": "blabla",

      "nodes": [
        {
          "id": "step1",
          "link": {
            "rel": "process",
            "title": "add",
            "type": "application/process+json",
            "href": "http://192.168.2.124:8080/geonovum/v1/processes/add"
          },
          "body": {
            "inputs": {
              "number1": 19,
              "number2": 7
            },
            "outputs": {
              "sum": {
                "transmissionMode": ["value"]
              }
            }
          }
        },
        {
          "id": "step2a",
          "link": {
            "rel": "process",
            "title": "multiply",
            "type": "application/process+json",
            "href": "http://192.168.2.124:8080/geonovum/v1/processes/multiply"
          },
          "body": {
            "inputs": {
              "number1": ":step1.outputs.sum",
              "number2": 5
            },
            "outputs": {
              "product": {
                "transmissionMode": ["value"]
              }
            }
          }
        },
        {
          "id": "step2b",
          "link": {
            "rel": "process",
            "title": "multiply",
            "type": "application/process+json",
            "href": "http://192.168.2.124:8080/geonovum/v1/processes/multiply"
          },
          "body": {
            "inputs": {
              "number1": ":step1.outputs.sum",
              "number2": 6
            },
            "outputs": {
              "product": {
                "transmissionMode": ["value"]
              }
            }
          }
        },
        {
          "id": "step3",
          "link": {
            "rel": "process",
            "title": "multiply",
            "type": "application/process+json",
            "href": "http://192.168.2.124:8080/geonovum/v1/processes/multiply"
          },
          "body": {
            "inputs": {
              "number1": ":step2b.outputs.product",
              "number2": 2
            },
            "outputs": {
              "product": {
                "transmissionMode": ["value"]
              }
            }
          }
        }
      ],

      "subscriber": {
        "successUri": ":serviceUrl/callback/:jobId?type=success",
        "inProgressUri": ":serviceUrl/callback/:jobId?type=inProgress",
        "failedUri": ":serviceUrl/callback/:jobId?type=failed"
      }
    }
  ]
}
